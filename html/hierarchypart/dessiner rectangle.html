<html>

    <head>  
        <script src="js/d3.v3.min.js"></script>
        <script src="js/file_json.js"></script>
        <script src="js/tree_largeur.js"></script>
        <script src="js/tree_profondeur.js"></script>
        <script src="js/draw.js"></script>
        
       <link rel="stylesheet" type="text/css" href="css/css.css">
    </head>
    
    <body>
   		voir logs console
        <div id="timeline">
            <div id="hierarchypart"> </div>
        </div>
    </body>

    <script>


	
    	var file = "mocks/mock2.json"; // Chemin du fichier json
    	var request = open_json(file); // Requete d'ouverture du fichier json
    	var hierarchypart = svg("#hierarchypart",window.innerWidth,3000); // selection d'un svg sur l'id hierarchypart
    	var element = hierarchypart.append("g"); // ajout dans cette hierarchypart une DIV "g" afin de grouper

    	

    	request.onload = function() {
    		/*
    		VARIABLE
    		*/
			let tableau; // variable temporaire
			file = request.response; // recuperation de donnees la requette
      	  	let nodelist = file['ownerlist'][0]['nodelist']; // variable temporaire indiquant le sommet (nodelist)
      		
      	  	
      	  	
      	  	/*
    		FONCTION			Parcour en largeur sur le sommet nodelist
    		*/
      	  	branche_niveau(nodelist);
      	  	
      	  	
      	  	
		  	tableau = marquer; // tableau vaut la sortie de la fonction branche_niveau
		  	marquer = []; // on reintialise la sortie
		  	
		  	
		  	
      	  	/*
    		FONCTION			Parcour en profondeur sur le sommet tableau
    		*/
		  	branche_profondeur(tableau[0]);
      	  	
      	  	
      	  	
		  	tableau = marquer; // tableau vaut la sortie de la fonction branche_niveau
		  	marquer = []; // on reintialise la sortie

		  	
		  	console.log(tableau)
		  	
		  	
		  	
			/*
    		JEU D'ESSAI			branche_profondeur
    		*/
			for (key_element in tableau){
			 	// i += 1;
				 
				 /*
				  y += 14;
				  let uid = tableau[key_element]['uid'];
				  let largeur = tableau[key_element]['profondeur']['largeur']
				  text(element, "uid: "+uid,x,y);
				  y += 14;
				  text(element, "branche Num: "+largeur,x,y);
				  y += 24;*/
			  
		  	}

		
			
			/*
    		JEU D'ESSAI			branche_niveau
    		*/


		  	/*
			var x_max = 500;
			var y_max = 200;
			var nombre_niveau = tableau.length;
			var x_niveau = x_max/nombre_niveau;
			var y_niveau;
			var y_sous_niveau;
			var i = 0;
			var x = 0;
			var y = 10;
			
			
			  for (key_element in tableau){
				  i += 1;
				  y = 0;
				  console.log(x);
				  text(element, "Niveau: "+i,x,y);
				  
				  for (key_feature in tableau[key_element]){
					  y_niveau = y_max/tableau[key_element].length;
					  //y_sous_niveau
					  console.log(tableau[parseInt(key_element)+1]);
	
					  var feature = tableau[key_element][key_feature];
					  rectangle(element,x,y,x_niveau-2,y_niveau-2);
					  text(element, feature['uid'],x,y);
					  y += y_niveau;
					  
				  }
				  y_niveau = 0;
				  x = x_niveau*i;
			  }
		*/
	
	
	
	
      	}

   </script>

</html>